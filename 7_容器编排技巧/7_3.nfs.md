### 安装 nfs-untils (DNSCA)
```shell script
yum install nfs-utils -y
```

### 安装 nfs-untils (所有节点)
```shell script
yum install nfs-utils -y
```

### 配置nfs (DNSCA)
```shell script
# 应该提前准备好目录 '/data/nfs-volume'
echo '/data/nfs-volume 10.1.1.0/24(rw,no_root_squash)' >>/etc/exports
systemctl start nfs-server
systemctl enable nfs-server

[root@localhost k8s-yaml]# showmount -e
Export list for localhost.localdomain:
/data/nfs-volume 10.1.1.0/24
```

### 应用资源配置清单 (任何一个Master)
```shell script
kubectl apply -f http://k8s-yaml.qytang.com/nfs/nginx-curl-nfs.yaml
```

### 查看NFS上的文件(任何一个Master)(不推荐使用)
```shell script
[root@master01 ~]# kubectl get pod
NAME                                  READY   STATUS    RESTARTS   AGE
nginx-curl-nfs-7f4f547cd6-8nfx5       1/1     Running   0          6s

[root@master01 ~]# kubectl exec -it nginx-curl-nfs-7f4f547cd6-8nfx5 -- /bin/bash
[root@nginx-curl-nfs-7f4f547cd6-8nfx5 /]# cd nfsv/
[root@nginx-curl-nfs-7f4f547cd6-8nfx5 nfsv]# ls
testfile.txt
[root@nginx-curl-nfs-7f4f547cd6-8nfx5 nfsv]# cat testfile.txt 
welcome to qytang
```

### pv pvc版本nfs(任何一个Master)
```shell script
[root@master01 ~]# kubectl apply -f http://k8s-yaml.qytang.com/nfs-pvc/pv_nfs.yaml
persistentvolume/nfspv created
[root@master01 ~]# kubectl apply -f http://k8s-yaml.qytang.com/nfs-pvc/pvc_nfs.yaml
persistentvolumeclaim/nfspvc created
[root@master01 ~]# kubectl apply -f http://k8s-yaml.qytang.com/nfs-pvc/nginx-curl-nfspvc.yaml
deployment.apps/nginx-curl-nfspvc created
```

### 配置DNS解析 (DNSCA)
```shell script
cat > /var/named/qytang.com.zone <<'EOF'

$ORIGIN qytang.com.
$TTL 600    ;   10 minutes
@       IN SOA  dnsca.qytang.com. dnsadmin.qytang.com. (
                                        2020090906      ; serial
                                        10800           ; refresh (3 hours)
                                        900             ; retry (15 minutes)
                                        604800          ; expire (1 week)
                                        86400           ; minimum (1 day)
                                        )
        NS      dnsca.qytang.com.
$TTL 60    ;   1 minute
dnsca                       A   10.1.1.219
harbor                      A   10.1.1.220
k8s-yaml                    A   10.1.1.219
traefik                     A   10.1.1.10
nginx-curl-dp               A   10.1.1.10
nginx-curl-ds               A   10.1.1.10
dashboard                   A   10.1.1.10
nginx-ceph                  A   10.1.1.10
ceph-mgr-dashboard		    A   10.1.1.10
nginx-nfspvc                A   10.1.1.10
EOF

systemctl restart named
```

### 网页访问
```shell script
https://nginx-nfspvc.qytang.com/
```
