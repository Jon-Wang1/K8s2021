### 给node01.qytanghost.com应用污点(yaml) (任何一个Master)
```shell
kubectl apply -f http://mgmtcentos.qytanghost.com/taints/node-taints.yaml

```

### 安装jq (任何一个Master)
```shell
yum install -y jq

```

### 查看node01.qytanghost.com的污点 (任何一个Master)
[root@master01 ~]# kubectl get node node01.qytanghost.com -o json | jq '.spec.taints'
[
  {
    "effect": "NoSchedule",
    "key": "disk",
    "value": "ssd"
  }
]

### 给node01.qytanghost.com应用污点(kubectl) (任何一个Master)
```shell
kubectl taint nodes node01.qytanghost.com cpu=i9:NoSchedule

```

### 查看node01.qytanghost.com的污点 (任何一个Master)
[root@master01 ~]# kubectl get node node01.qytanghost.com -o json | jq '.spec.taints'
[
  {
    "effect": "NoSchedule",
    "key": "cpu",
    "value": "i9"
  },
  {
    "effect": "NoSchedule",
    "key": "disk",
    "value": "ssd"
  }
]

### 删除node01.qytanghost.com的污点(kubectl) (任何一个Master)
```shell
kubectl taint nodes node01.qytanghost.com cpu-

```

### 确认node01.qytanghost.comd的cpu污点已经被删除 (任何一个Master)
[root@master01 ~]# kubectl get node node01.qytanghost.com -o json | jq '.spec.taints'
[
  {
    "effect": "NoSchedule",
    "key": "disk",
    "value": "ssd"
  }
]

### 应用没有配置容忍策略的DP (任何一个Master)
```shell
kubectl apply -f http://mgmtcentos.qytanghost.com/taints/no-tolerations.yaml

```

### 查看pod，肯定不位于node01.qytanghost.com，因为它有污点 (任何一个Master)
[root@master01 ~]# kubectl get pods -l "app=no-tolerations" -o wide
NAME                              READY   STATUS    RESTARTS   AGE     IP              NODE                    NOMINATED NODE   READINESS GATES
no-tolerations-58797c8cd8-5cfh8   1/1     Running   0          2m45s   172.16.203.16   node03.qytanghost.com   <none>           <none>
no-tolerations-58797c8cd8-fdfd8   1/1     Running   0          2m45s   172.16.203.14   node03.qytanghost.com   <none>           <none>
no-tolerations-58797c8cd8-h2jks   1/1     Running   0          2m45s   172.16.203.15   node03.qytanghost.com   <none>           <none>

### 应用容忍污点策略的DP (任何一个Master)
```shell
kubectl apply -f http://mgmtcentos.qytanghost.com/taints/tolerations.yaml

```

[root@master01 ~]# kubectl get pod -o wide
NAME                                         READY   STATUS    RESTARTS   AGE     IP              NODE                    NOMINATED NODE   READINESS GATES
no-tolerations-58797c8cd8-5llxk              1/1     Running   0          13m     172.16.202.9    node02.qytanghost.com   <none>           <none>
no-tolerations-58797c8cd8-lrvcf              1/1     Running   0          13m     172.16.202.8    node02.qytanghost.com   <none>           <none>
no-tolerations-58797c8cd8-nq4c8              1/1     Running   0          13m     172.16.202.10   node02.qytanghost.com   <none>           <none>

tolerations-79d4f765c6-lsfz4                 1/1     Running   0          12s     172.16.201.36   node01.qytanghost.com   <none>           <none>
tolerations-79d4f765c6-r4rzw                 1/1     Running   0          12s     172.16.201.38   node01.qytanghost.com   <none>           <none>
tolerations-79d4f765c6-xjptg                 1/1     Running   0          12s     172.16.201.37   node01.qytanghost.com   <none>           <none>


### 一定要去掉污点
[root@master01 ~]# kubectl taint nodes node01.qytanghost.com disk-
node/node01.qytanghost.com untainted

